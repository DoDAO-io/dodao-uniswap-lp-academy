categories: []
content: What are Ticks and Ranges in Uniswap V3
created: '2023-04-21T17:29:33.338Z'
guideIntegrations:
  discordRoleIds: []
guideType: course
key: liquidity-pool-details-uniswap
name: Liquidity Pool Details
publishStatus: Live
showIncorrectOnCompletion: true
steps:
  - content: >
      ### Uniswap V2 - Liquidity Graph


      <div align="center">

      <img
      src="https://d31h13bdjwgzxs.cloudfront.net/academy/uniswap-eth-1/Guide/liquidity-pool-details-uniswap/1681912476448_07_v2_liquidity_chart.png"
      />

      </div>


      ### Uniswap V3 - Liquidity Graph


      <div align="center">

      <img
      src="https://d31h13bdjwgzxs.cloudfront.net/academy/uniswap-eth-1/Guide/liquidity-pool-details-uniswap/1681912741645_07_v3_liquidity_chart.png"
      />

      </div>
    name: Liquidity Graph
    stepItems: []
    uuid: a8421242-16c4-4e2b-aafc-0d93be135acc
  - content: >-
      ## Real and Virtual Reserves

      In Uniswap V3, the concepts of real and virtual reserves are used to
      manage liquidity within a pool. Let's break down these terms in simple
      words and provide an example to illustrate their roles.


      **Real reserves**: Real reserves are the actual amounts of the two tokens
      held in a liquidity pool. When liquidity providers (LPs) add or remove
      liquidity, they directly affect the real reserves. The real reserves are
      used to calculate the exchange rate between the two tokens in a pool,
      following the constant product formula (x * y = k).


      **Virtual reserves**: Virtual reserves are a mathematical concept used to
      determine how much liquidity is available for trading within the current
      price range. They are not actual tokens held in the pool but rather a
      representation of the liquidity that is active within a specific price
      range. Virtual reserves help calculate the effective exchange rate and
      slippage for trades within the given range.


      <div align="center">

      <img
      src="https://d31h13bdjwgzxs.cloudfront.net/academy/uniswap-eth-1/Guide/liquidity-pool-details-uniswap/1681926781696_09_real_reserves.png"
      />

      </div>


      ### Example

      Let's consider another example using the Uniswap V3 ETH/USDC pool. In this
      case, we'll use specific real reserve amounts and simulate adding
      liquidity within a certain price range.


      Assume the ETH/USDC pool has the following real reserves:


      Real reserves: 50 ETH and 100,000 USDC

      Now, a liquidity provider (LP) wants to add liquidity within the price
      range of 1,800 USDC/ETH to 2,200 USDC/ETH. They decide to add 10 ETH and
      20,000 USDC within this range.


      After adding the liquidity, the pool's real reserves will be updated:


      Real reserves: 60 ETH (50 + 10) and 120,000 USDC (100,000 + 20,000)

      However, only the added liquidity by the LP falls within the specified
      price range (1,800 to 2,200 USDC/ETH). Therefore:


      Virtual reserves: 10 ETH and 20,000 USDC (the liquidity active within the
      price range)

      When a user wants to swap tokens within the 1,800 to 2,200 USDC/ETH price
      range, the virtual reserves (10 ETH and 20,000 USDC) will be used to
      determine the exchange rate and potential slippage for their trade. Trades
      outside of this price range will not have access to the virtual reserves
      and may experience higher slippage or fail due to lack of liquidity.


      This example demonstrates the difference between real and virtual reserves
      in Uniswap V3. Real reserves are the actual token amounts held in the
      pool, while virtual reserves represent the liquidity available within a
      specific price range for trading.
    name: Real Reserves Graph
    stepItems: []
    uuid: 1a443116-13c7-4830-94ce-e345fd0b92c4
  - content: >
      ### Ticks in Uniswap V3

      In Uniswap V3, a tick is a discrete value that represents a specific price
      point within the price range of a liquidity pool. Ticks are used to divide
      the price range into equally sized intervals, and they help determine how
      liquidity is distributed across the pool.


      Each tick is associated with a unique tick index, which is an integer
      value. The tick index can be positive, negative, or zero, and the
      relationship between tick indexes and price is logarithmic. In Uniswap V3,
      the price at a given tick is determined by the formula: price =
      1.0001^(tick index).


      An important concept related to ticks is the "tick spacing," which is the
      difference between two adjacent tick indexes. The tick spacing depends on
      the liquidity pool's fee tier, and it can be 10, 60, or 200. This means
      that liquidity providers (LPs) can only add or remove liquidity at price
      levels that correspond to the tick spacing.


      ### Example

      Let's consider a Uniswap V3 liquidity pool for the token pair ETH/DAI with
      a tick spacing of 10. Suppose a liquidity provider wants to add liquidity
      within the price range of 1000 DAI/ETH and 2000 DAI/ETH. To determine the
      ticks for this range:


      1. Calculate the tick index for the lower price bound (1000 DAI/ETH):

      tick_lower = log(1000) / log(1.0001) â‰ˆ 6909.57, rounded down to 6900
      (nearest multiple of 10)

      2. Calculate the tick index for the upper price bound (2000 DAI/ETH):

      tick_upper = log(2000) / log(1.0001) â‰ˆ 13819.14, rounded down to 13810
      (nearest multiple of 10)


      The liquidity provider would then add liquidity between tick 6900 and tick
      13810. As the price moves between these ticks, the liquidity provider
      would earn fees proportional to the amount of liquidity provided and the
      volume of trades occurring within this range.
    name: What is a Tick?
    stepItems: []
    uuid: 92dd24dd-dc3f-4780-99f5-039abc822b17
  - content: >
      ### Price Graph with Ticks

      <div align="center">

      <img
      src="https://d31h13bdjwgzxs.cloudfront.net/academy/uniswap-eth-1/Guide/liquidity-pool-details-uniswap/1681919204016_08_price_grap_with_ticks.png"
      />

      </div>



      ### When traders buy "token-0"


      <div align="center">

      <img
      src="https://d31h13bdjwgzxs.cloudfront.net/academy/uniswap-eth-1/Guide/liquidity-pool-details-uniswap/1681919784044_08_price_grap_with_ticks_2.png"
      />

      </div>


      ### When traders buy "token-1"


      <div align="center">

      <img
      src="https://d31h13bdjwgzxs.cloudfront.net/academy/uniswap-eth-1/Guide/liquidity-pool-details-uniswap/1681920018141_08_price_grap_with_ticks_3.png"
      />

      </div>
    name: Price Graph with Ticks
    stepItems: []
    uuid: a22bf566-4e7b-44c5-bda1-390176f395d6
  - content: ''
    name: Your Info
    stepItems:
      - label: Nickname
        required: true
        type: PublicShortInput
        uuid: 07d8d83c-6014-499c-9a85-1f4f66a1d50c
    uuid: f6e88272-f3b2-451c-a85d-629747fc87d2
  - content: >-


      . Uniswap V3 liquidity providers specify the price range

      [ğ‘†ğ‘™, ğ‘†ğ‘¢] in which they wish to supply liquidity (cf. Figure 2b). Their

      liquidity then only supports trading within this price range. Thus,

      Uniswap V3 has an increased liquidity concentration around the

      current price and thereby increases the marketâ€™s capital efficiency.

      We note that liquidity providers can only choose the price boundaries of
      their liquidity position from a predefined set of the poolâ€™s

      initialized ticks. There is a tick at every integer exponent of 1.0001,

      and the price of tick ğ‘– (ğ‘– âˆˆ Z) is given by


      ğ‘† (ğ‘–) = 1.0001ğ‘–

      .

      Consequently, each tick is 0.01% (one basis points (bps)) away from

      each neighboring tick. Not every tick can be initialized in a pool,

      instead, only ticks with indexes divisible by the poolâ€™s predefined

      tick spacing (ğ‘¡ğ‘  ) can be initialized. Figure 2c shows a schematic

      representation of a liquidity allocation across a liquidity poolâ€™s

      price range. The liquidity is no longer constant across the entire

      price range, instead, only between the poolâ€™s initialized ticks.

      Uniswap V3 utilizes the concept of virtual reserves, adjusted

      larger reserves, to describe the poolâ€™s behavior between two adjacent
      ticks ğ‘‡ğ‘™ and ğ‘‡ğ‘¢. The virtual reserves act as if the liquidity

      in the entire pool matches that of the current price range. Thus,

      the virtual reserves of the current price range are a transformation

      of the rangeâ€™s real reserves that allow for the application of the

      constant product formula. In the following we consider a pool with

      reserves ğ‘¥real and ğ‘¦real between two adjacent ticks. The price range

      between ticks ğ‘‡ğ‘™ and ğ‘‡ğ‘¢ is given by [ğ‘†ğ‘™

      , ğ‘†ğ‘¢]. Instead of ensuring

      that the product between the reserves stays constant, the protocol ensures
      that the product of the virtual reserves ğ‘¥ and ğ‘¦ stays

      constant, i.e.,


      ```

      ğ‘¥ Â· ğ‘¦ = ğ¿^2

      ```


      where ğ¿ the liquidity reserved in between ticks ğ‘‡ğ‘™ and ğ‘‡ğ‘¢ [14].

      Further, the marginal price is given by ğ‘† = ğ‘¦/ğ‘¥. The following

      relationship then holds between the virtual reserves, liquidity, and

      marginal price:


      ğ‘¥ = ğ¿âˆš ğ‘†


      ğ‘¦ = ğ¿âˆšğ‘†.


      Thus, the virtual reserves behave according to the constant product

      price curve as shown in Figure 1. Similarly, the real reserves can be

      obtained as follows:


      ğ‘¥real = ğ‘¥ âˆ’ ğ¿âˆšğ‘†ğ‘¢ = ğ¿âˆšğ‘† âˆ’ ğ¿âˆšğ‘†ğ‘¢


      ğ‘¦real = ğ‘¦ âˆ’ ğ¿âˆšï¸ğ‘†ğ‘™ = ğ¿âˆšğ‘† âˆ’ ğ¿âˆšï¸ğ‘†ğ‘™.


      Observe that the pool only needs to maintain sufficient reserves to

      support trading within the price boundaries [ğ‘†ğ‘™, ğ‘†ğ‘¢]. Thus, the real

      reserves of ğ‘‹-token shrink as the value of ğ‘‹ in terms of ğ‘Œ increases

      and are fully depleted at the upper price boundary ğ‘†ğ‘¢. The opposite

      holds for the real reserves of ğ‘Œ-token.


      https://blog.woodstockfund.com/2022/10/10/uniswap-v3-interesting-facts/
    name: Rough Work
    stepItems: []
    uuid: 0ef2865a-f456-4a52-9f19-8c288dcac086
thumbnail: https://d31h13bdjwgzxs.cloudfront.net/academy/uniswap/uniswap_pool_details.png
uuid: liquidity-pool-details-uniswap
